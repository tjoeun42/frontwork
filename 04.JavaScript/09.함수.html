<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>함수</title>
    <style>
        .area {
            border: 1px solid;
            padding: 5px;
        }
    </style>
</head>
<body>
    <h1>함수</h1>

    <h2>함수선언하는 방법</h2>

    <ol>
        <li>선언적 함수(Function Declaration) : function키워드 , 함수명</li>
        <li>익명 함수(Function Expression) : 변수에 익명함수를 대입하는 방식</li>
        <li>화살표 함수(Arrow Function) : 익명함수를 간단히 작성하는 방법(ES6에 추가)</li>
        <li>즉시 실행함수 iife(Immediately Invoked Function Expression)
            <ul>
                <li>선언과 호출</li>
                <li>변수를 캡슐화 처리 유용</li>
            </ul>
        </li>
    </ol>

    <h3>* 선언적 함수</h3>
    <pre>
    function 함수명([매개변수, ...]) {
        해당 함수 호출시 실행할 코드;
        [return 결과값;]
    }
    </pre>

    <div class="area" id="area1"></div>
    <button onclick="test1();">실행확인</button>

    <script>
        function test1() {
            document.getElementById('area1').innerHTML += "test1() 함수 실행됨"
        }
    </script>

    <hr>

    <h3>* 익명 함수</h3>
    <pre>
    변수|속성 = function([매개변수,..]) {
        해당 함수 호출시 실행할 코드;
        [return 결과값;]
    }

    - 특정 변수나 속성에 대입되는 함수 제시시 주로 사용됨
      (이벤트 핸들러 작성시 주로 사용)
    </pre>

    <div class="area" id="area2"></div>
    <button id="btn1">실행확인</button>

    <script>
        const btn1 = document.getElementById('btn1');

        btn1.onclick = function(){
            document.getElementById('area2').innerHTML = '이벤트 핸들러를 통해 실행됨';
        }     
    </script>

    <hr>

    <h3>* 화살표 함수</h3>
    <pre>
    - 본문에 리턴만 있을 때
      변수 = ([매개변수, 매개변수, ...]) => 리턴값
    
    - 본문에 여러줄 일 때
      변수 = ([매개변수, 매개변수, ...]) => {
        해당 함수 호출시 실행할 코드;
        return 결과값;
      }  
    </pre>

    <div class="area" id="area3"></div>
    <button id="btn2">실행확인</button>

    <script>
        const area3 = document.getElementById('area3');
        const btn2 = document.getElementById('btn2');

        btn2.onclick = () => area3.innerHTML = '매개변수가 없는 화살표 함수 실행';
    </script>

    <hr>

    <h3>* 즉시 실행 함수 iife</h3>
    <pre>
    - 정의하면서 즉시 실행되는 함수
    - 단 한번만 호출됨
      ([변수] = function([매개변수, 매개변수, ...]) {
        해당 함수 호출시 실행할 코드;
      })(인자1, 인자2,...);
    </pre>

    <script>
        // 문서가 로딩된 직 후 함수의 갯수만큼 실행(단한번만 호출)
        (function() {
            console.log('iife');
        })();

        (function(name) {
            console.log(`Hi ${name}`);
            const k = 999;
            console.log(k);
        })('철수');

        (name => console.log(`Hi ${name}`))('영희');
        (() => console.log('-------------------------'))();
        
        /*
        // onload : 문서가 로딩된 직 후 마지막 1개만 실행(단한번만 호출)
        window.onload = function() {
            console.log('onload');
        }

        window.onload = function() {
            console.log('onload2');
        }

        window.onload = function() {
            console.log('마지막');
        }
        */
    </script>

    <hr>

    <h2>함수의 매개변수</h2>

    <div class="area" id="area4"></div>
    <button onclick="test2('안녕하세요');">실행확인</button>
    <button onclick="test2(10);">실행확인</button>
    <button onclick="test2([1,2,3]);">실행확인</button>
    <button onclick="test2(true);">실행확인</button>
    <br>
    <button onclick="test2(prompt('이름을 입력하세요'));">실행확인</button>
    <button onclick="test2('안녕하세요', '반갑습니다');">실행확인</button><!-- 매개변수의 갯수가 초과되었을 때는 초과한것은 무시 -->
    <button onclick="test2(10, true, '안녕');">실행확인</button>
    <button onclick="test2();">실행확인</button> <!-- 매개변수의 갯수가 적게 들어왔을경우 undefined-->

    <script>
        function test2(value) {
            document.getElementById('area4').innerHTML = value;
        }
    </script>

    <hr>

    <h3>* 매개변수 관련 arguments</h3>
    <!--
        arguments는 엄밀히 따지면 배열은 아님
        배열로 변환하기 : Array.from(arguments);
    -->
    <p>
        함수 호출시 전달되는 값은 내부적으로 arguments 형식에 담김
        * arguments : 모든 함수마다 내부적으로 하나씩 존재
    </p>

    <div class="area" id="area5"></div>
    <button onclick="test3(13, 11, 1, 7, 5);">실행확인</button>

    <script>
        function test3() {
            console.log(arguments);
            console.log(arguments[1]);

            const area5 = document.getElementById('area5');

            let sum = 0;
            for(let num of arguments) {
                sum += num;
            }
            area5.innerHTML = `총합 : ${sum}<br>`;
            area5.innerHTML += `평균 : ${sum/arguments.length}<br>`; 

            // for in, for of 사용가능
            // forEach()는 안됨(배열이 아니라서) : 쓰려면 Array.from(arguments) 배열로 바꾼 후 사용가능
        }
    </script>

    <br>

    <h3>* 매개변수에 this관련 전달하기</h3>
    <p>
        - this : 현재 이벤트가 발생한 요소 객체
    </p>

    <div class="area" id="area6"></div>
    <button onclick="test4(this);">버튼1</button>
    <button onclick="test4(this.innerHTML);"><b>버튼2</b></button>
    <input type="button" value="버튼3" onclick="test4(this.value);">
    <button id="btn3" onclick="test4(this.id);">버튼4</button>

    <script>
        function test4(e) {
            console.log(e);
        }
    </script>

    <br><br>

    <button onclick="test5(this);">클릭</button>
    <script>
        function test5(e) {
            e.style.backgroundColor = 'hotpink';
            e.innerHTML = '클릭됨';
        }
    </script>

    <hr>

    <h2>함수의 리턴</h2>

    <h3>* 일반적인 값</h3>

    <div class="area" id="area7"></div>
    <button onclick="test6();">실행확인</button>

    <script>
        // 1~100사이의 숫자를 랜덤으로 추출하는 함수 만들기
        function ran() {
            const random = parseInt(Math.random() * 100 + 1);
            return random;
        }

        function test6() {
            document.getElementById('area7').innerHTML = `랜덤값 : ${ran()}<br>`;
        }
    </script>

    <button onclick="console.log(ran());">클릭</button>
    <button onclick="document.getElementById('area7').innerHTML = ran();">클릭</button>

    <hr>

    <h3>* 익명 함수 리턴</h3>
    이름 : <input id="userName">
    <button onclick="test7()();">실행확인</button>

    <script>
        function test7() {
            let inputE1 = document.getElementById('userName');
            // console.log(inputE1.value);
            return function() {
                alert(inputE1.value);
            }
        }
    </script>

    <hr>

    <h2>화살표 함수의 매개변수와 리턴</h2>

    <h4>* 매개변수 지정 방법</h4>
    <pre>
    - 매개변수가 없는 경우 : () => return값;  (소괄호는 반드시 있어야됨)
    - 매개변수가 1개인 경우 : x => return값;  (소괄호 생략가능)
    - 매개변수가 1개 이상인 경우 : (x, y) => return값;  (소괄호는 반드시 있어야됨)   
    </pre>

    <h4>* 함수의 body 지정 방법</h4>
    <pre>
    - single line block
      x => { return 값; }
      x => 값    (return키워드와 중괄호 생략 가능)
      
    - multi line block  
      x => {
        실행구문;
        return 값;
      }  
    </pre>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</body>
</html>